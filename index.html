<html>
	<head>
		<title>Magical School Administrator</title>
		<style></style>
		<script src="http://code.createjs.com/createjs-2013.12.12.min.js"></script>
    	<script src="https://rawgithub.com/madrobby/keymaster/master/keymaster.js"></script>
    	<script src="lib/emitr.js"></script>
    	<script src="lib/JSXTransformer.js"></script>
    	<script src="lib/react.js"></script>

    	<script type="text/jsx" src="js/RoomEditor.js"></script>
    	<script type="text/jsx" src="js/StudentInterface.js"></script>

    	<script src="js/Room.js"></script>
    	<script src="js/RoomHandler.js"></script>
    	<script src="js/StudentHandler.js"></script>
    	<script src="js/Student.js"></script>

	</head>
	<body onload="init()">
		<div><button onclick="emitr.trigger('editRooms')">Edit Rooms</button></div>
		<div style="float:right" id="roomEditor"></div>
		<div style="float:right" id="studentInteface"></div>
		<script type="text/jsx">
			/** @jsx React.DOM */
			React.renderComponent(<RoomEditor/>,document.getElementById('roomEditor'));
			React.renderComponent(<StudentInterface/>,document.getElementById('studentInteface'));
		</script>
		<canvas width="1000" height="400" id="demoCanvas">Could not load Canvas. Try another browser?</canvas>
		<script>

			emitr = new emitr();

			var stage;
			function init() {
				stage = new createjs.Stage("demoCanvas");

				var map = new createjs.Container();
				stage.addChild(map);

				map.x = 200;

				roomHandler = new RoomHandler(map);
				studentHandler = new StudentHandler(map, roomHandler);

				createjs.Ticker.addEventListener("tick", update);


				// stage.addChild(new createjs.Shape()).setTransform(100,100).graphics.f("red").dc(0,0,50);
			}

			function update(event) {
				var dt = event.delta / 1000;
				if (key.isPressed("left")) {
					stage.x += 300 * dt;
				}
				if (key.isPressed("right")) {
					stage.x -= 300 * dt;
				}
				if (key.isPressed("up")) {
					stage.y += 300 * dt;
				}
				if (key.isPressed("down")) {
					stage.y -= 300 * dt;
				}
				studentHandler.update(dt);
				stage.update();
			}
		</script>
	</body>
</html>