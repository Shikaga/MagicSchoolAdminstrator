<html>
	<head>
		<title>Magical School Administrator</title>
		<style>
			.menu {
				position: absolute;
				background-color: white;
				border: solid;
				right: 0px;
			}
		</style>
		<script src="lib/createjs-2013.12.12.min.js"></script>
    	<script src="lib	/keymaster.js"></script>
    	<script src="lib/emitr.js"></script>
    	<script src="lib/JSXTransformer.js"></script>
    	<script src="lib/react.js"></script>
    	<script src="lib/chance.js"></script>

    	<script type="text/jsx" src="interfaces/RoomInterface.js"></script>
    	<script type="text/jsx" src="interfaces/StudentInterface.js"></script>
    	<script type="text/jsx" src="interfaces/TimetableInterface.js"></script>
    	<script type="text/jsx" src="interfaces/ClockInterface.js"></script>
    	<script type="text/jsx" src="interfaces/ItemsInterface.js"></script>


    	<script src="js/MovableEntity.js"></script>
    	<script src="js/DormItems.js"></script>

    	<script src="js/Room.js"></script>
    	<script src="js/RoomTypes.js"></script>
    	<script src="js/RoomHandler.js"></script>
    	<script src="js/StudentHandler.js"></script>
    	<script src="js/Person.js"></script>
    	<script src="js/Student.js"></script>
    	<script src="js/Teacher.js"></script>
    	<script src="js/Clock.js"></script>
    	<script src="js/Timetable.js"></script>
    	<script src="js/ItemPlacer.js"></script>
    	<script src="js/ItemRenderer.js"></script>
    	<script src="js/Item.js"></script>

    	<script src="js/LibraryStateHandler.js"></script>
    	<script src="js/RelaxActivity.js"></script>
    	<script src="js/SleepActivity.js"></script>
    	<script src="js/ClassActivity.js"></script>

	</head>
	<body onload="init()">
		<div>
			<button onclick="emitr.trigger('editRooms')">Edit Rooms</button>
			<button onclick="emitr.trigger('editTimetable')">Edit Timetable</button>
			<button onclick="emitr.trigger('showItemsMenu')">Edit Objects</button>
			<span id="clockInterface"></span>
		</div>
		<div class="menu" >
			<div id="roomEditor"></div>
			<div id="studentInteface"></div>
			<div id="timetableInterface"></div>
			<div id="clockInterface"></div>
			<div id="itemsInterface"></div>
		</div>
		<script type="text/jsx">
			/** @jsx React.DOM */
			React.renderComponent(<RoomEditor/>,document.getElementById('roomEditor'));
			React.renderComponent(<StudentInterface/>,document.getElementById('studentInteface'));
			React.renderComponent(<TimetableInterface/>,document.getElementById('timetableInterface'));
			React.renderComponent(<ClockInterface/>,document.getElementById('clockInterface'));
			React.renderComponent(<ItemsInterface/>,document.getElementById('itemsInterface'));
		</script>
		<canvas width="1000" height="300" id="demoCanvas">Could not load Canvas. Try another browser?</canvas>
		<script>
			emitr = new emitr();

			var stage;
			function init() {

				clock = new Clock();

				stage = new createjs.Stage("demoCanvas");

				map = new createjs.Container();
				stage.addChild(map);
				map.scaleX = 0.5;
				map.scaleY = 0.5;

				map.x = 350;
				map.y = 150;

				itemContainer = new createjs.Container();
				map.addChild(itemContainer);

				personContainer = new createjs.Container();
				map.addChild(personContainer);

				roomHandler = new RoomHandler(map);
				var studentHandler = new StudentHandler(map, roomHandler);
				var spawnCoords = roomHandler.spawnRoom.getRandomCoordinates();
				var teacher = new Teacher(map, spawnCoords.x, spawnCoords.y);

				createjs.Ticker.addEventListener("tick", update);


				// stage.addChild(new createjs.Shape()).setTransform(100,100).graphics.f("red").dc(0,0,50);
			}

			function update(event) {
				var dt = event.delta / 1000;
				if (key.isPressed("left")) {
					stage.x += 300 * dt;
				}
				if (key.isPressed("right")) {
					stage.x -= 300 * dt;
				}
				if (key.isPressed("up")) {
					stage.y += 300 * dt;
				}
				if (key.isPressed("down")) {
					stage.y -= 300 * dt;
				}
				clock.update(event.delta);
				stage.update();
			}
		</script>
	</body>
</html>